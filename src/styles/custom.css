/*
  Custom Cloudflare-inspired theme overrides for Starlight.
  Cloudflare signature orange: #F6821F
  ─────────────────────────────────────────────────────────
  Features:
  • VitePress-style header nav (see Header.astro)
  • Hover / page-transition / dark-light animations
  • Accent-orange links, buttons, sidebar highlight
*/

/* ══════════════════════════════════════════
   Fonts
   ── Inter               English pages only  (full Latin, via :lang(en))
   ── Montserrat          non-English Latin   (all other pages)
   ── HarmonyOS Sans SC   Simplified Chinese  (local variable font, zh-CN pages)
   ── TC Local Font       Traditional Chinese (local variable font placeholder, zh-TW pages)
   ── JP Local Font       Japanese            (local variable font placeholder, ja pages)
   ── M PLUS 2            CJK / kana fallback for all above (Google CDN)
   ── M PLUS Code Latin 60  code / monospace
   ══════════════════════════════════════════ */

/* Load Latin fonts + M PLUS 2 + M PLUS Code Latin 60 via single Google CDN request.
   Google handles per-subset woff2 splitting on its side.                   */
@import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100..900;1,100..900&family=M+PLUS+2:wght@100..900&family=M+PLUS+Code+Latin+60:wght@400;700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

/* ── HarmonyOS Sans SC ──────────────────────────────────────────────────────
   Variable font (local file). Simplified Chinese CJK ONLY.
   unicode-range intentionally excludes hiragana/katakana (U+3040-30FF)
   and other kana ranges so it never interferes with zh-HK or ja pages.
   Place file at: public/fonts/HarmonyOS_Sans_SC/HarmonyOS_Sans_SC_VF.woff2 */
@font-face {
  font-family: 'HarmonyOS Sans SC';
  src: url('/fonts/HarmonyOS_Sans_SC/HarmonyOS_Sans_SC_VF.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
  unicode-range:
    /* CJK Radicals & Kangxi */
    U+2E80-2EFF, U+2F00-2FDF,
    /* CJK Punctuation (no kana) */
    U+3000-303F,
    /* Bopomofo */
    U+3100-312F,
    /* CJK Compatibility / Enclosed */
    U+3200-33FF,
    /* CJK Extension A */
    U+3400-4DBF,
    /* CJK Unified Ideographs */
    U+4E00-9FFF,
    /* CJK Compatibility Ideographs */
    U+F900-FAFF,
    /* CJK Compatibility Forms */
    U+FE10-FE1F, U+FE30-FE4F,
    /* Halfwidth/Fullwidth Forms (punctuation only, not kana) */
    U+FF01-FF60, U+FFE0-FFEF;
}

/* ── TC Local Font (Traditional Chinese) ───────────────────────────────────
   PLACEHOLDER — place a variable woff2 here when ready:
     public/fonts/TC/TC_VF.woff2
   Suggested fonts: Noto Serif TC, GenWanMin TW, or any TC variable font. */
@font-face {
  font-family: 'TC Local Font';
  src: url('/fonts/TC/TC_VF.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
  unicode-range:
    U+2E80-2EFF, U+2F00-2FDF, U+3000-303F, U+3100-312F,
    U+31F0-31FF, U+3200-33FF, U+3400-4DBF,
    U+4E00-9FFF, U+F900-FAFF, U+FE10-FE1F, U+FE30-FE4F,
    U+FF00-FFEF;
}

/* ── JP Local Font (Japanese) ───────────────────────────────────────────────
   PLACEHOLDER — place a variable woff2 here when ready:
     public/fonts/JP/JP_VF.woff2
   Suggested fonts: Noto Sans JP, BIZ UDGothic, or any JP variable font.  */
@font-face {
  font-family: 'JP Local Font';
  src: url('/fonts/JP/JP_VF.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
  unicode-range:
    /* Hiragana + Katakana */
    U+3040-30FF, U+31F0-31FF, U+FF65-FF9F,
    /* CJK Unified Ideographs */
    U+4E00-9FFF, U+3400-4DBF,
    /* CJK Compatibility + Radicals */
    U+2E80-2EFF, U+2F00-2FDF, U+3200-33FF,
    U+F900-FAFF, U+FE10-FE1F, U+FE30-FE4F, U+FF00-FFEF;
}

/* ── Per-locale font stacks ─────────────────────────────────────────────────
   Strategy: :lang() selectors override --sl-font so the browser picks the
   correct primary font based on the page's declared language.
   The mono stack and code elements are the same for all locales.           */

/* Default (all non-English pages): Montserrat leads Latin */
:root {
  --sl-font: 'Montserrat', 'HarmonyOS Sans SC', 'M PLUS 2',
             ui-sans-serif, system-ui, sans-serif;
  --sl-font-mono: 'M PLUS Code Latin 60', ui-monospace, 'Cascadia Code',
                  'Fira Code', monospace;
}

/* English pages: Inter covers full Latin — no CJK needed */
:root:lang(en) {
  --sl-font: 'Inter', ui-sans-serif, system-ui, sans-serif;
}

/* Simplified Chinese pages: HarmonyOS SC before M PLUS 2 */
:root:lang(zh-CN) {
  --sl-font: 'Montserrat', 'HarmonyOS Sans SC', 'M PLUS 2',
             ui-sans-serif, system-ui, sans-serif;
}

/* Traditional Chinese pages (zh-HK locale): TC local font before M PLUS 2 */
:root:lang(zh-HK) {
  --sl-font: 'Montserrat', 'TC Local Font', 'M PLUS 2',
             ui-sans-serif, system-ui, sans-serif;
}

/* Japanese pages: JP local font before M PLUS 2 */
:root:lang(ja) {
  --sl-font: 'Montserrat', 'JP Local Font', 'M PLUS 2',
             ui-sans-serif, system-ui, sans-serif;
}

/* Ensure code elements use the monospace stack in all locales */
code, pre, kbd, samp {
  font-family: var(--sl-font-mono);
}

/* ══════════════════════════════════════════
   0.  Global transition for dark ↔ light
   ══════════════════════════════════════════ */
:root {
  /* Cloudflare Orange accent */
  --sl-color-accent-low:  hsl(27, 91%, 88%);
  --sl-color-accent:      hsl(27, 91%, 54%);
  --sl-color-accent-high: hsl(38, 100%, 48%);

  --sl-color-white: #fff;

  --sl-color-text: #f5f0eb;

  --sl-color-bg-nav:     hsl(220, 20%, 10%);
  --sl-color-bg-sidebar: hsl(220, 18%, 12%);
}

/* Smooth dark / light transition on every colour property */
*,
*::before,
*::after {
  transition:
    background-color 0.3s ease,
    border-color 0.3s ease,
    color 0.3s ease,
    box-shadow 0.3s ease,
    opacity 0.3s ease;
}

/* ══════════════════════════════════════════
   1.  Page-transition animation (View Transitions API fallback)
   ══════════════════════════════════════════ */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

main {
  animation: fadeIn 0.35s ease both;
}

/* ══════════════════════════════════════════
   2.  Links
   ══════════════════════════════════════════ */
a {
  color: var(--sl-color-accent);
  transition: color 0.2s ease;
}
a:hover {
  color: var(--sl-color-accent-high);
}

/* ══════════════════════════════════════════
   3.  Sidebar active link
   ══════════════════════════════════════════ */
.sidebar-content a[aria-current='page'],
.sidebar-content a[aria-current='true'] {
  color: var(--sl-color-accent);
  border-left: 3px solid var(--sl-color-accent);
  background-color: hsl(27 91% 54% / 0.10);
  transition: background-color 0.25s ease, border-color 0.25s ease, color 0.25s ease;
}

/* ══════════════════════════════════════════
   4.  Buttons
   ══════════════════════════════════════════ */
.sl-button,
a.sl-button {
  background-color: var(--sl-color-accent);
  border-color: var(--sl-color-accent);
  color: var(--sl-color-white);
  transition: background-color 0.25s ease, transform 0.15s ease;
}
.sl-button:hover,
a.sl-button:hover {
  background-color: var(--sl-color-accent-high);
  border-color: var(--sl-color-accent-high);
  transform: translateY(-1px);
}
.sl-button:active,
a.sl-button:active {
  transform: translateY(0);
}

/* ══════════════════════════════════════════
   5.  Code blocks
   ══════════════════════════════════════════ */
code,
pre {
  background-color: hsl(220, 15%, 14%) !important;
}

/* ══════════════════════════════════════════
   6.  Hero button
   ══════════════════════════════════════════ */
.hero .action.primary {
  background-color: var(--sl-color-accent);
  border: 2px solid var(--sl-color-accent);
  transition: background-color 0.25s ease, transform 0.15s ease;
}
.hero .action.primary:hover {
  background-color: var(--sl-color-accent-high);
  transform: translateY(-1px);
}

/* ══════════════════════════════════════════
   7.  Sidebar & navigation hover animations
   ══════════════════════════════════════════ */
/* General sidebar link hover */
[data-pagefind-ignore] a,
nav a {
  transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
}

/* Sidebar group toggle smooth */
details summary {
  transition: color 0.2s ease;
  cursor: pointer;
}
details summary:hover {
  color: var(--sl-color-white);
}

/* ══════════════════════════════════════════
   8.  Card hover scale
   ══════════════════════════════════════════ */
.sl-link-card {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.sl-link-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px hsl(0 0% 0% / 0.15);
}

/* ══════════════════════════════════════════
   9.  Mobile menu slide-in
   ══════════════════════════════════════════ */
@media (max-width: 49.999rem) {
  nav.vp-nav {
    display: none !important;
  }

  nav.sidebar {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* ══════════════════════════════════════════
  10.  Light-mode overrides
   ══════════════════════════════════════════ */
:root[data-theme='light'] {
  --sl-color-bg-nav:     hsl(0, 0%, 100%);
  --sl-color-bg-sidebar: hsl(0, 0%, 97%);
  --sl-color-text: #333;
}

:root[data-theme='light'] code,
:root[data-theme='light'] pre {
  background-color: hsl(220, 15%, 95%) !important;
}

